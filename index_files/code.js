var _tmr=_tmr||[];
(function(){function w(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function A(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function Z(a){for(var b="",c,d=0;d<a;d++)c=16*Math.random()|0,b+=c.toString(16);return b}function s(){return(new Date).getTime()}function ta(){var a="tmr"+(""+Math.random()).slice(2);try{return G.setItem(a,a),G.removeItem(a),!0}catch(b){return!1}}function T(a){try{return G.getItem($+"_"+
a)}catch(b){}return null}function B(a,b){try{G.setItem($+"_"+a,b)}catch(c){}}function aa(a){g(q(a,!0,!1,!1)+";e="+escape("detect"))}function f(){}function H(a){a&&"object"===typeof a&&(!t&&"id"in a)&&(t=a.id)}function ba(a){return a||"https:"==document.location.protocol||"chrome-extension:"==document.location.protocol?"https:":"http:"}function ua(a){return(a=!C?void 0:C[a])&&U?a-U:void 0}function g(a){var b=ba(D)+"//top-fwz1.mail.ru"+a;"function"===typeof navigator.sendBeacon&&!0===navigator.sendBeacon(b)||
(a=new Image,a.src=b)}function I(a,b,c){if(!(b&&"object"===typeof b))return l&&console.warn("[TopMailRu]: Invalid event of "+a),null;var d={name:a,title:c.title||null};"id"in c&&!1!==c.id&&(d.id="id"in b&&b.id,!0!==c.id&&(d.id=d.id||c.id));if(l){var e=ca(b,{params:c.required,fn:c.fn});if(e.missed.length)return console.warn("[TopMailRu]"+(d.id?"["+d.id+"]":"")+": Unspecified "+(1<e.missed.length&&e.missed.slice(0,-1).join(", ")+" and "||"")+e.missed.slice(-1)+" in "+a),null;var da=ca(b,{params:c.optional,
fn:c.fn}),f=[].concat(e.values).concat(da.values),e=[].concat(e.missed).concat(da.missed);c.value&&(b="value"in b&&b.value,!0!==c.value&&(b=b||c.value),b?f.push("value: "+b):e.push("value"));d.value=f.length?"{ "+f.join(", ")+" }":"";d.empty=e.length?"("+(1<e.length?e.slice(0,-1).join(", ")+" and "+e.slice(-1)+" are":e.slice(-1)+" is")+" empty)":""}return"id"in c&&!1!==c.id&&!d.id?(l&&console.warn("[TopMailRu]: Undefined counter ID of "+a+" "+d.value),null):d}function ca(a,b){var c=[],d=[],e,f;if(b.params)for(e in b.params)b.params.hasOwnProperty(e)&&
!1!==b.params[e]&&(f=e in a&&a[e],!0!==b.params[e]&&(f=f||b.params[e]),f?c.push(e+': "'+(b.fn?b.fn.call(self,e,f):f)+'"'):d&&d.push(e));return{values:c,missed:d}}function J(a){console.info("[TopMailRu]["+a.id+"]: "+(a.title||a.name)+" "+a.value+" "+a.empty)}function q(a,b,c,d){u&&B(K,++r);var e="id"in a?a.id:t,f="url"in a?a.url:location.href,k="referrer"in a?a.referrer:document.referrer,l="title"in a?a.title:document.title,g;g=V;null===g&&(g=va());g=null!==g?g?1:0:null;var m="userid"in a?a.userid:
x||0===x?x:void 0,h;h=[];t&&e!==t&&h.push("sec");h=h.join(",");var n;b=(b?"/tracker":"/counter")+"?js=13"+(e?";id="+escape(e):"")+(f?";u="+escape(f):"")+(k?";r="+escape(k):"")+("start"in a&&0<a.start?";st="+escape(a.start):"")+("gender"in a?";gender="+escape(a.gender):"")+("age"in a?";age="+escape(a.age):"")+("pid"in a?";pid="+escape(a.pid):"")+(void 0!==m?";userid="+escape(m):"")+(d&&l?";title="+encodeURIComponent(l):"")+((n=window.screen)?";s="+n.width+"*"+n.height:"")+";vp=";d=n=0;document.documentElement&&
(document.documentElement.clientWidth||document.documentElement.clientHeight)?(n=document.documentElement.clientWidth,d=document.documentElement.clientHeight):"number"==typeof window.innerWidth&&(n=window.innerWidth,d=window.innerHeight);n=b+(""+n+"*"+d)+";touch="+wa+";hds="+xa+";flash="+W+";sid="+ea+";ver="+fa;if(c){if(!C||!X)c="";else{c=[];c.push(X.type);c.push(X.redirectCount);c.push(U);for(b=0;b<ga.length;b++)c.push(ua(ga[b]));c=c.join("/")}c=";nt="+c}else c="";c=n+c+("device"in a?";device="+
escape(a.device):"");var p;if("params"in a){n=escape;if(a=a.params)if(b=typeof a,"number"===b||"boolean"===b||"string"===b||a.nodeType||a===a.window)p="";else{d=[];for(p in a)if(a.hasOwnProperty(p)){e=a[p];b=typeof e;if("string"===b)e='"'+e.replace(/[\"\']/g,"\\$&")+'"';else if(!("number"===b||"boolean"===b))continue;d.push('"'+p+'":'+e)}p=!d.length?"":"{"+d.join(",")+"}"}else p="";p=";params="+n(p)}else p="";return c+p+(null!==g?";detect="+g:"")+(u?";lvid="+escape(u?""+L+":"+s()+":"+r+":"+M:""):
"")+(h?";opts="+escape(h):"")+";_="+Math.random()}function ha(a){for(var b=0;b<m.length;b++)g(q(m[b],!0,!1,!0)+";e="+escape("PVT/"+a))}function ya(){V=!0;ia(1);if(!ja&&!E){E=!0;for(var a=0;a<m.length;a++)aa(m[a])}}function za(){ia(0);V=!1}function va(){var a;a=(a=ka.cookie.match(RegExp("(?:^|; )"+la.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):null;if(null===a)return null;a=a.split("|");if(2!==a.length)return null;var b=a[1],b=s()-b;if(0>b||b>ma)return null;
a=parseInt(a[0],10);return isNaN(a)?null:a}function ia(a){var b=s(),b=[a,b].join("|"),c=la;a={path:"/",expires:ma};var d=a.expires;"number"===typeof a.expires&&(d=new Date,d.setTime(d.getTime()+a.expires));d&&d.toUTCString&&(d=d.toUTCString());a.expires=d;var b=c+"="+encodeURIComponent(b),e;for(e in a)b+="; "+e,c=a[e],!0!==c&&(b+="="+c);ka.cookie=b}function N(){document.addEventListener?(A(document,"DOMContentLoaded",N),_tmr.onready()):document.attachEvent&&"complete"===document.readyState&&(A(document,
"readystatechange",N),_tmr.onready())}function na(){A(window,"load",na);_tmr.onready();_tmr.onload()}function O(){A(window,"unload",O);A(window,"beforeunload",O);_tmr.unload()}if("[object Array]"===Object.prototype.toString.call(_tmr)){var h=window,k=navigator,ka=document,G=window.localStorage||null,$="tmr",u=ta(),E=!1,V=null,ma=864E5,la="tmr_detect",Aa=function(){function a(a,c){var d=document.createElement("div");d.setAttribute("class",String.fromCharCode(97,100,118,98,108,111,99,107,32,97,100,
118,101,114,116,98,108,111,99,107,32,97,109,109,98,108,111,99,107,32,98,45,98,97,110,110,101,114,32,98,45,109,101,100,105,97,45,98,97,110,110,101,114,32,112,117,98,95,51,48,48,120,50,53,48,32,112,117,98,95,51,48,48,120,50,53,48,109,32,109,101,100,105,117,109,95,114,101,99,116,97,110,103,108,101,95,51,48,48,95,50,53,48,32,112,117,98,95,55,50,56,120,57,48,32,108,101,97,100,101,114,98,111,97,114,100,95,55,50,56,95,57,48,32,119,105,100,101,95,115,107,121,115,99,114,97,112,101,114,95,49,54,48,95,54,48,
48,32,119,105,100,101,95,115,107,121,115,99,114,97,112,101,114,95,49,54,48,120,54,48,48,32,116,101,120,116,45,97,100,32,116,101,120,116,65,100,32,116,101,120,116,95,97,100,32,116,101,120,116,95,97,100,115,32,116,101,120,116,45,97,100,115,32,116,101,120,116,45,97,100,45,108,105,110,107,115,32,97,100,95,116,101,120,116,32,97,100,95,116,101,120,116,32,98,97,110,110,101,114,95,116,101,120,116,32,116,101,120,116,45,98,97,110,110,101,114,32,98,45,114,98));d.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;");
this.bait=document.body.appendChild(d);this.bait.offsetParent;this.bait.offsetHeight;this.bait.offsetLeft;this.bait.offsetTop;this.bait.offsetWidth;this.bait.clientHeight;this.bait.clientWidth;this.loopNumber=0;this.fnPositive=a||null;this.fnNegative=c||null;var e=this;setTimeout(function(){e._checkBait.call(e)},1)}a.prototype._checkBait=function(){if(E)this._stop();else{var a=!1;null!==document.body.getAttribute("abp")||null===this.bait.offsetParent||0==this.bait.offsetHeight||0==this.bait.offsetLeft||
0==this.bait.offsetTop||0==this.bait.offsetWidth||0==this.bait.clientHeight||0==this.bait.clientWidth?a=!0:void 0!==window.getComputedStyle&&(a=window.getComputedStyle(this.bait,null),a="none"==a.getPropertyValue("display")||"hidden"==a.getPropertyValue("visibility"));(!0===a||10<=++this.loopNumber)&&this._stop();if(a&&this.fnPositive)try{this.fnPositive()}catch(c){}else if(!a&&10>this.loopNumber){var d=this;setTimeout(function(){d._checkBait.call(d)},50*this.loopNumber)}else try{this.fnNegative()}catch(e){}}};
a.prototype._stop=function(){try{document.body.removeChild(this.bait)}catch(a){}};return function(b,c){new a(b,c)}}(),fa=60,P=[],Y=0,Q=0,ea=Z(16),x=null,R=0,K="reqNum",r=u&&T(K);null===r?(r=0,u&&B(K,r)):r=parseInt(r,10);var M=u&&T("lvid"),L=u&&T("lvidTS");if(null===M||null===L)M=Z(32),L=""+s(),r=0,u&&(B("lvid",M),B("lvidTS",L),B(K,r));var t=0,m=[],F=[],S=[],v="string"===typeof location.hostname&&(-1!=location.hostname.search(/^odnoklassniki\.ru$/)||-1!=location.hostname.search(/\.odnoklassniki\.ru$/)||
-1!=location.hostname.search(/^ok\.ru$/)||-1!=location.hostname.search(/\.ok\.ru$/)),D="string"===typeof location.hostname&&(-1!=location.hostname.search(/^vk\.com$/)||-1!=location.hostname.search(/\.vk\.com$/)),y="string"===typeof location.hostname&&(-1!=location.hostname.search(/^lamoda\.ru$/)||-1!=location.hostname.search(/\.lamoda\.ru$/)),Ba="string"===typeof location.search&&-1!=location.search.search(/[?&]rb_clickid=/),l="string"===typeof location.search&&-1!=location.search.search(/[?&]tmr_debug=1(?:&|$)/),
oa=v||D||y,Ca=!Ba,Da=v||D,Ea=v||D,pa=v||D,ja=!1,wa="ontouchstart"in h||1<(k.maxTouchPoints||k.msMaxTouchPoints)?"1":"0",xa=window.devicePixelRatio||0,W="";if(k.plugins&&k.plugins["Shockwave Flash"])W=k.plugins["Shockwave Flash"].description.split(" ")[2];else if(window.ActiveXObject)try{var z=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),z=z.GetVariable("$version"),z=z.split(" ")[1].split(","),W=z[0]+"."+z[1]}catch(Fa){}var h=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||
{},C=h.timing||{},X=h.navigation||{},ga="unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),U=!C?void 0:C.navigationStart;f.prototype.pageView=function(a){H(a);var b;if(b=a&&"object"===typeof a)if(b="id"in a)if(b=5>F.length){b:{for(b=
0;b<F.length;b++)if(F[b]===a.id){b=!0;break b}b=!1}b=!b}b&&(F.push(a.id),!1!==a.beat&&S.push(a.id),m.push(a),E&&aa(a));if(b=I("pageView",a,{title:"Page view",id:!0,optional:{url:location.href}}))"start"in a&&P.push(a),g(q(a,!1,!1,!0)),Q=s(),l&&J(b)};f.prototype.reachGoal=function(a){H(a);var b=I("reachGoal",a,{title:"Reach goal",id:t,value:!0,required:{goal:!0},optional:null,fn:null});if(b&&"goal"in a&&a.goal){var c="";"value"in a&&a.value&&(c=parseInt(a.value)||"");g(q(a,!0,!1,!0)+(";e="+escape("RG:"+
c+"/"+a.goal)));l&&J(b)}};f.prototype.itemView=function(a){var b=I("itemView",a,{title:"Item view",id:t,optional:{list:!0,productid:!0,pagetype:!0,totalvalue:!0},fn:function(a,b){return(""+b).replace(/;/g," ")}});if(b){var c=a.list||"",d=a.productid||"",e=a.pagetype||"",f=a.totalvalue||0;(new Image).src=ba(0)+"//ad.mail.ru/retarget/?counter="+b.id+"&list="+c+"&productid="+d+"&pagetype="+e+"&totalvalue="+f+"&_="+Math.random();c="IV:"+f+"/"+(""+c).replace(/;/g," ")+";"+(""+d).replace(/;/g," ")+";"+
(""+e).replace(/;/g," ");g(q(a,!0,!1,!1)+(";e="+escape(c)));l&&J(b)}};f.prototype.sendEvent=function(a){H(a);var b=I("sendEvent",a,{title:"Send event",id:t,value:!0,required:{category:!0,action:!0},optional:{label:!0},fn:function(a,b){return(""+b).substr(0,300).replace(/;/g," ")}});if(b&&"category"in a&&a.category&&"action"in a&&a.action){var c=(""+a.category).substr(0,300),d=(""+a.action).substr(0,300),e="";"label"in a&&a.label&&(e=(""+a.label).substr(0,300));var f="";"value"in a&&a.value&&(f=parseInt(a.value)||
"");c="CE:"+f+"/"+(""+c).replace(/;/g," ")+";"+(""+d).replace(/;/g," ")+";"+(""+e).replace(/;/g," ");g(q(a,!0,!1,!1)+(";e="+escape(c)));l&&J(b)}};f.prototype.setUserID=function(a){if(null===a||!1===a||void 0===a)this.deleteUserID();else{var b=typeof a;"number"!==b&&"string"!==b?l&&console.warn("[TopMailRu]: Invalid user ID in setUserID"):(x=a,l&&console.info("[TopMailRu]: Global user ID = "+x))}};f.prototype.deleteUserID=function(){x=null;l&&console.info("[TopMailRu]: Reset global user ID to null")};
f.prototype.processEvent=function(a){if(a&&"object"===typeof a)if("type"in a)switch(a.type){case "pageView":this.pageView(a);break;case "reachGoal":this.reachGoal(a);break;case "itemView":this.itemView(a);break;case "sendEvent":this.sendEvent(a);break;case "setUserID":"userid"in a&&this.setUserID(a.userid);break;case "deleteUserID":this.deleteUserID()}else l&&console.warn("[TopMailRu]: Unspecified push event type");else l&&console.warn("[TopMailRu]: Invalid push event")};f.prototype.push=function(a){for(var b=
0,c=arguments.length;b<c;b++)this.processEvent(arguments[b])};var qa=!1;f.prototype.onready=function(){qa||(qa=!0,!ja&&!E&&Aa(ya,za))};var ra=!1;f.prototype.onload=function(){if(!ra){ra=!0;if(!Ea&&0<P.length){R=s();for(var a=0,b;b=P[a];a++)g(q(b,!0,!0,!1)+";e="+escape("RT/load")+";et="+R);Q=R;P=[]}Ca||setTimeout(function(){ha(2)},2E3);Da||setTimeout(function(){ha(15)},15E3)}};f.prototype.beat=function(){if(!oa&&0!=S.length&&Y){var a=s(),b=a-Y;if(!(12E4<b)){if(12E4<a-Q)for(var c=0;c<m.length;c++)!1!==
m[c].beat&&g(q(m[c],!0,!1,!0)+";e="+escape("RT/resend")+";et="+R+";active="+(b?"1":"0"));else g("/tracker?js=13;id="+S[0]+";e="+escape("RT/beat")+";sid="+ea+";ids="+S.join()+";ver="+fa+";_="+Math.random());Q=a}}};var sa=!1;f.prototype.unload=function(){if(!sa&&(sa=!0,!pa))for(var a=0;a<m.length;a++)g(q(m[a],!0,!1,!1)+(";e="+escape("RT/unload")))};f.prototype.activity=function(a){Y=s()};h=new f;k=0;for(v=_tmr.length;k<v;k++)(y=_tmr[k])&&"object"===typeof y&&H(y);k=0;for(v=_tmr.length;k<v;k++)y=_tmr[k],
h.processEvent(y);_tmr=h;if("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)_tmr.onready();else document.addEventListener?w(document,"DOMContentLoaded",N):document.attachEvent&&w(document,"readystatechange",N);if("complete"===document.readyState)_tmr.onload();else w(window,"load",na);pa||(w(window,"unload",O),w(window,"beforeunload",O));if(!oa&&0<F.length){setInterval(_tmr.beat,3E4);try{h=function(a){function b(a){w(document,a,function(){_tmr.activity(a)})}
for(var c=0;c<a.length;c++)b(a[c])},h(["scroll","gesturechange","touchmove"]),h(["mousedown","mousemove","mouseup","touch"]),w(window,"scroll",function(){_tmr.activity("scallback")})}catch(Ga){}}}})();
